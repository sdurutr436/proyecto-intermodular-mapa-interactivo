<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: routes/api/translate</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: routes/api/translate</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>API routes for the translation service.
Implements a hybrid translation system using DeepL as the primary service
and Google Translate as a free fallback. Includes automatic language detection,
translation caching and country blocking based on source language.</p></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="~DEEPL_API_KEY"><span class="type-signature">(inner, constant) </span>DEEPL_API_KEY<span class="type-signature"> :deepl.Translator|null</span></h4>




<div class="description">
    <p>DeepL translator configuration</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">deepl.Translator</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line25">line 25</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="~DEEPL_SUPPORTED_LANGS"><span class="type-signature">(inner, constant) </span>DEEPL_SUPPORTED_LANGS<span class="type-signature"> :Array.&lt;string></span></h4>




<div class="description">
    <p>List of language codes supported by the DeepL API.
Includes regional variants like pt-BR (Brazilian Portuguese) and zh-CN (Simplified Chinese).</p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Array.&lt;string></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line143">line 143</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~GET"><span class="type-signature">(inner) </span>GET<span class="signature">()</span><span class="type-signature"> &rarr; {500}</span></h4>
    

    



<div class="description">
    <p>Test route that intentionally generates an error to verify that Sentry captures errors.
This route should NOT be used in production.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line681">line 681</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Internal Server Error - Error captured by Sentry</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">500</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>Request
GET /api/translate/test-error</code></pre>



        
            

    

    
    <h4 class="name" id="~POST"><span class="type-signature">(inner) </span>POST<span class="signature">()</span><span class="type-signature"> &rarr; {200|400|500}</span></h4>
    

    



<div class="description">
    <p>Automatically detects the language of a text and returns the list of blocked countries
to avoid translations to the same language. Useful for pre-validation of countries before
performing a translation.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req.body</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Request body</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text for language detection (minimum 2 characters)</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line294">line 294</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>
<ul>
        <li>
<div class="param-desc">
    <p>Success - Blocked countries detected correctly</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">200</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Bad Request - Invalid or empty text</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">400</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Internal Server Error - Detection service error</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">500</span>


    </dd>
</dl>
</li>
    </ul>




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>Request
POST /api/translate/blocked-countries
Content-Type: application/json

{
  "text": "Hola mundo"
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Success)
{
  "blockedCountries": ["ESP", "MEX", "ARG", "COL", "CHL"],
  "sourceLang": "es",
  "message": "OK"
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Text too short)
{
  "blockedCountries": [],
  "sourceLang": null,
  "message": "Text too short to detect language"
}</code></pre>

    <pre class="prettyprint"><code>Response 400 (Bad Request)
{
  "success": false,
  "message": "Invalid text"
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Could not detect)
{
  "blockedCountries": [],
  "sourceLang": null,
  "message": "Could not detect language"
}</code></pre>



        
            

    

    
    <h4 class="name" id="~POST"><span class="type-signature">(inner) </span>POST<span class="signature">()</span><span class="type-signature"> &rarr; {200|400|403|404|429|500|502|504}</span></h4>
    

    



<div class="description">
    <p>Translates a text to the official language of the selected country using a hybrid system
(DeepL for better quality, Google Translate as free fallback). Includes
automatic source language detection, blocking countries with the same language,
MongoDB cache system and complete parameter validation.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>req.body</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Request body</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to translate (maximum 500 characters, minimum 1)</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>geo</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Geographic information of the destination country</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>properties</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last"><p>Country properties</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Country name in English (e.g.: &quot;Spain&quot;, &quot;France&quot;)</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line371">line 371</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>
<ul>
        <li>
<div class="param-desc">
    <p>Success - Translation completed successfully</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">200</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Bad Request - Invalid parameters or text too long</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">400</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Forbidden - Country blocked because it speaks the same language as the text</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">403</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Not Found - Unsupported country or language not configured</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">404</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Too Many Requests - API quota exceeded</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">429</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Internal Server Error - Translation service error</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">500</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Bad Gateway - Could not connect to external service</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">502</span>


    </dd>
</dl>
</li>
    
        <li>
<div class="param-desc">
    <p>Gateway Timeout - Request timed out</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">504</span>


    </dd>
</dl>
</li>
    </ul>




    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>Request
POST /api/translate
Content-Type: application/json

{
  "text": "Hello world",
  "geo": {
    "properties": { "name": "Spain" }
  }
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Success - New translation)
{
  "success": true,
  "translation": "Hola mundo",
  "language": "Spanish",
  "country": "Spain",
  "languageCode": "es",
  "fromCache": false,
  "blockedCountries": ["USA", "GBR", "AUS"]
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Success - From cache)
{
  "success": true,
  "translation": "Hola mundo",
  "language": "Spanish",
  "country": "Spain",
  "languageCode": "es",
  "fromCache": true
}</code></pre>

    <pre class="prettyprint"><code>Response 200 (Success - Same language)
{
  "success": true,
  "translation": "Hola mundo",
  "language": "Spanish",
  "country": "Spain",
  "languageCode": "es",
  "fromCache": false,
  "note": "The text is already in the language of the selected country"
}</code></pre>

    <pre class="prettyprint"><code>Response 400 (Bad Request - Invalid text)
{
  "success": false,
  "message": "Invalid text",
  "details": "A valid text is required for translation"
}</code></pre>

    <pre class="prettyprint"><code>Response 400 (Bad Request - Text too long)
{
  "success": false,
  "message": "Text too long",
  "details": "Text cannot exceed 500 characters"
}</code></pre>

    <pre class="prettyprint"><code>Response 400 (Bad Request - Incomplete data)
{
  "success": false,
  "message": "Incomplete data",
  "details": "Destination country information is required"
}</code></pre>

    <pre class="prettyprint"><code>Response 403 (Forbidden - Country blocked)
{
  "success": false,
  "message": "Country 'Spain' is blocked because its main language matches the source language.",
  "blockedCountries": ["ESP", "MEX", "ARG"],
  "sourceLang": "es",
  "details": "You must choose a different country where that language is not spoken as the main language."
}</code></pre>

    <pre class="prettyprint"><code>Response 404 (Not Found - Unsupported country)
{
  "success": false,
  "message": "Unsupported country: Antarctica",
  "details": "Country not in our database"
}</code></pre>

    <pre class="prettyprint"><code>Response 404 (Not Found - Language not configured)
{
  "success": false,
  "message": "Language not configured for: Vatican City",
  "details": "Could not find the language associated with the country"
}</code></pre>

    <pre class="prettyprint"><code>Response 429 (Too Many Requests)
{
  "success": false,
  "message": "Translation quota exceeded",
  "details": "quota exceeded for DeepL API",
  "timestamp": "2025-12-10T00:45:23.123Z"
}</code></pre>

    <pre class="prettyprint"><code>Response 500 (Internal Server Error)
{
  "success": false,
  "message": "Internal server error",
  "details": "Database connection failed",
  "timestamp": "2025-12-10T00:45:23.123Z"
}</code></pre>

    <pre class="prettyprint"><code>Response 502 (Bad Gateway)
{
  "success": false,
  "message": "Could not connect to the translation service",
  "details": "ENOTFOUND api.deepl.com",
  "timestamp": "2025-12-10T00:45:23.123Z"
}</code></pre>

    <pre class="prettyprint"><code>Response 504 (Gateway Timeout)
{
  "success": false,
  "message": "Request timed out",
  "details": "Request timeout after 30s",
  "timestamp": "2025-12-10T00:45:23.123Z"
}</code></pre>



        
            

    

    
    <h4 class="name" id="~detectLanguage"><span class="type-signature">(async, inner) </span>detectLanguage<span class="signature">(text)</span><span class="type-signature"> &rarr; {Promise.&lt;(string|null)>}</span></h4>
    

    



<div class="description">
    <p>Main function to detect the language of a text.
Uses Google Translate as the detection engine.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to analyze</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line72">line 72</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Base language code (without regional variants) or null</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(string|null)></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const lang = await detectLanguage('Bonjour le monde');
console.log(lang); // 'fr'</code></pre>



        
            

    

    
    <h4 class="name" id="~detectLanguageWithGoogle"><span class="type-signature">(async, inner) </span>detectLanguageWithGoogle<span class="signature">(text)</span><span class="type-signature"> &rarr; {Promise.&lt;(string|null)>}</span></h4>
    

    



<div class="description">
    <p>Detects the language of text using the free Google Translate API.
No authentication required and supports all languages available in Google Translate.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to detect the language of</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line30">line 30</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>ISO 639-1 language code (e.g., 'es', 'en', 'fr') or null if failed</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(string|null)></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const lang = await detectLanguageWithGoogle('Hello world');
console.log(lang); // 'en'</code></pre>



        
            

    

    
    <h4 class="name" id="~getBlockedCountriesBySourceLang"><span class="type-signature">(inner) </span>getBlockedCountriesBySourceLang<span class="signature">(sourceLangCode)</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span></h4>
    

    



<div class="description">
    <p>Gets the list of countries that should be blocked for translation
based on the detected source language. Blocks countries where the source
language is the official language to avoid meaningless translations.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sourceLangCode</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>ISO code of source language (e.g., 'es', 'en', 'pt-BR')</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Array of ISO Alpha-3 codes of blocked countries</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;string></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const blocked = getBlockedCountriesBySourceLang('es');
console.log(blocked); // ['ESP', 'MEX', 'ARG', 'COL', ...]</code></pre>



        
            

    

    
    <h4 class="name" id="~translateText"><span class="type-signature">(async, inner) </span>translateText<span class="signature">(text, sourceLang, targetLang)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    <p>Hybrid translation function that automatically selects the best service.
Tries DeepL first (higher quality) and uses Google Translate as fallback.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to translate</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sourceLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Source language code</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Target language code</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>If both services fail</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Translated text</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const result = await translateText('Hello', 'en', 'ja');
console.log(result); // 'こんにちは'</code></pre>



        
            

    

    
    <h4 class="name" id="~translateWithDeepL"><span class="type-signature">(async, inner) </span>translateWithDeepL<span class="signature">(text, sourceLang, targetLang)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    <p>Translates text using the DeepL API (premium higher quality service).
Requires valid API key configured in DEEPL_API_KEY.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to translate</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sourceLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Source language code</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Target language code</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line191">line 191</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>If API key is invalid, quota exceeded, or language not supported</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    <p>High quality translated text</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const translated = await translateWithDeepL('Hello world', 'en', 'es');
console.log(translated); // 'Hola mundo'</code></pre>



        
            

    

    
    <h4 class="name" id="~translateWithGoogleFallback"><span class="type-signature">(async, inner) </span>translateWithGoogleFallback<span class="signature">(text, sourceLang, targetLang)</span><span class="type-signature"> &rarr; {Promise.&lt;string>}</span></h4>
    

    



<div class="description">
    <p>Translates text using the free Google Translate API.
Used as fallback when DeepL is not available or doesn't support the language.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>text</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Text to translate</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sourceLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Source language code</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetLang</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>Target language code</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="routes_api_translate.js.html">routes/api/translate.js</a>, <a href="routes_api_translate.js.html#line149">line 149</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        <p>If translation fails or response is invalid</p>
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    <p>Translated text</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;string></span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const translated = await translateWithGoogleFallback('Hello', 'en', 'es');
console.log(translated); // 'Hola'</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-config_db.html">config/db</a></li><li><a href="module-data_countriesDatabase.html">data/countriesDatabase</a></li><li><a href="module-data_countryCodeMapping.html">data/countryCodeMapping</a></li><li><a href="module-data_countryLanguageMap.html">data/countryLanguageMap</a></li><li><a href="module-data_phrasesDatabase.html">data/phrasesDatabase</a></li><li><a href="module-getFlagUrl.html">getFlagUrl</a></li><li><a href="module-models_GameStats.html">models/GameStats</a></li><li><a href="module-models_Translation.html">models/Translation</a></li><li><a href="module-routes_api_game.html">routes/api/game</a></li><li><a href="module-routes_api_translate.html">routes/api/translate</a></li></ul><h3>Global</h3><ul><li><a href="global.html#PORT">PORT</a></li><li><a href="global.html#app">app</a></li><li><a href="global.html#corsOptions">corsOptions</a></li><li><a href="global.html#limiter">limiter</a></li><li><a href="global.html#translateLimiter">translateLimiter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Feb 11 2026 08:08:38 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>